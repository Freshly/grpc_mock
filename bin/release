#!/usr/bin/env ruby

require_relative "../lib/grpc_mock/version"

current_branch = `git rev-parse --abbrev-ref HEAD`.strip

unless current_branch == "master" || GrpcMock::VERSION =~ %r{\.pre\d*\z}
  puts "Can only release from the master branch ðŸ˜¿"
  exit 1
end

system "git tag v#{GrpcMock::VERSION}"

system "git push --tag"

system "git push fury #{current_branch}:master"
